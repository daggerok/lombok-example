/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.7/userguide/java_library_plugin.html
 */

plugins {
    id 'idea'
    id 'eclipse'
    id 'io.franzbecker.gradle-lombok' version '1.14' apply false
}

allprojects {
    buildscript {
        ext {
            javaVersion = JavaVersion.VERSION_1_8
            lombokVersion = '1.16.20'
            slf4jVersion = '1.7.25'

            junitPlatformVersion = '1.2.0'
            junitJupiterVersion = '5.2.0'
            hamcrestVersion = '1.3'
            junit4Version = '4.12'
        }
        apply from: "$rootDir/gradle/repositories.gradle"
    }

    apply plugin: 'base'

    version '0.0.1'
    group 'com.github.daggerok'
    description 'Gradle + Lombok configurations investigation..'

    apply from: "$rootDir/gradle/repositories.gradle"

    clean.doFirst {
        delete fileTree(rootDir) {
            include 'dists-*/**'
        }
    }
}

// lombok
subprojects {
    apply plugin: 'java'

    javadoc.failOnError = false

    dependencies {
        compile "org.slf4j:slf4j-api:$slf4jVersion"
        compile "org.slf4j:jul-to-slf4j:$slf4jVersion"
        compile "org.slf4j:log4j-over-slf4j:$slf4jVersion"
        compile 'ch.qos.logback:logback-classic:1.2.3'
    }

    // junit
    dependencies {
        testImplementation "junit:junit:$junit4Version"
        testImplementation "org.hamcrest:hamcrest-core:$hamcrestVersion"
        testImplementation "org.junit.jupiter:junit-jupiter-api:$junitJupiterVersion"
        testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:$junitJupiterVersion"
        testRuntimeOnly "org.junit.vintage:junit-vintage-engine:$junitJupiterVersion", {
            because 'allows JUnit 3 and JUnit 4 tests to run'
        }
        testRuntime "org.junit.platform:junit-platform-launcher:$junitPlatformVersion", {
            because 'allows tests to run from IDEs that bundle older version of launcher'
        }
    }

    test {
        useJUnitPlatform {
            includeEngines 'junit-jupiter', 'junit-vintage'
        }
    }
}

idea {
    module {
        downloadSources = true
        downloadJavadoc = false
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.7'
    distributionType = 'BIN'
}
